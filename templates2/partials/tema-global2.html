<!-- Variables CSS para temas -->
<style>
:root {
    /* Variables por defecto */
    --primary-color: #4e73df;
    --secondary-color: #1cc88a;
    --background-color: #f8f9fc;
    --text-color: #5a5c69;
    --header-bg: #ffffff;
    --card-bg: #ffffff;
}

/* Tema oscuro */
[data-theme="dark"] {
    --primary-color: #375adc;
    --secondary-color: #1ab394;
    --background-color: #2f3136;
    --text-color: #e1e1e1;
    --header-bg: #202225;
    --card-bg: #36393f;
}

/* Tema claro */
[data-theme="light"] {
    --primary-color: #6c63ff;
    --secondary-color: #38d39f;
    --background-color: #ffffff;
    --text-color: #333333;
    --header-bg: #f8f9fa;
    --card-bg: #ffffff;
}

/* Aplicar variables a elementos */
body {
    background-color: var(--background-color);
    color: var(--text-color);
}

.header {
    background-color: var(--header-bg);
}

.card {
    background-color: var(--card-bg);
}

.btn-primary {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

.btn-success {
    background-color: var(--secondary-color);
    border-color: var(--secondary-color);
}
</style>

<!-- Meta con información del usuario -->
{% if session.user %}
<meta name="user-email" content="{{ session.user.email_key }}">
<script>
    // Cargar tema y colores desde servidor si están disponibles
    {% if session.user.preferencias %}
        {% if session.user.preferencias.tema %}
            sessionStorage.setItem('user-theme', "{{ session.user.preferencias.tema }}");
        {% endif %}
        
        {% if session.user.preferencias.colores %}
            {% for nombre, valor in session.user.preferencias.colores.items() %}
                sessionStorage.setItem('user-{{ nombre }}', "{{ valor }}");
            {% endfor %}
        {% endif %}
    {% endif %}
</script>
{% endif %}

<!-- Scripts para gestión de temas -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/theme-selector.css') }}">
<script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
<script src="{{ url_for('static', filename='js/theme-manager.js') }}"></script>
